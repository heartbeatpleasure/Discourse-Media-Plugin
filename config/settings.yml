plugins:
  media_gallery_enabled:
    default: true
    client: true

  # Viewing rules (members-only). Leave empty to allow all logged-in users.
  media_gallery_viewer_groups:
    default: ""
    type: list
    client: false

  # Upload rules
  media_gallery_allowed_uploader_groups:
    default: "trust_level_0"
    type: list
    client: false

  # Optional extra size limit (MB) on top of Discourse's max_attachment_size_kb. 0 = disabled.
  media_gallery_max_upload_size_mb:
    default: 0
    client: false

  media_gallery_max_tags_per_item:
    default: 10
    client: false

  media_gallery_allowed_tags:
    default: ""
    type: list
    client: true

  # Transcoding / policy
  media_gallery_video_max_duration_seconds:
    default: 600
    client: false

  media_gallery_audio_max_duration_seconds:
    default: 900
    client: false

  media_gallery_video_target_bitrate_kbps:
    default: 5000
    client: false

  media_gallery_video_max_fps:
    default: 30
    client: false

  media_gallery_audio_bitrate_kbps:
    default: 128
    client: false

  media_gallery_delete_original_on_success:
    default: true
    client: false

  # Images: standardize output to JPG (requested). Turn off to match the original spec.
  media_gallery_transcode_images_to_jpg:
    default: true
    client: false

  # Storage hardening (Option A): store processed media + thumbs outside /uploads.
  # When enabled, the plugin streams files from /shared via tokenized URLs only.
  media_gallery_private_storage_enabled:
    default: true
    client: false

  # Base folder inside the container for private (processed) media. Must be writable by the discourse user.
  media_gallery_private_root_path:
    default: "/shared/media_gallery/private"
    client: false

  # Optional export location for originals (so a NAS can rsync-pull them). Originals are never served publicly.
  media_gallery_original_export_root_path:
    default: "/shared/media_gallery/original_export"
    client: false

  # Retention window for originals in HOURS. 0 = delete immediately after successful processing.
  media_gallery_original_retention_hours:
    default: 4
    client: false


  # Tokenized streaming
  media_gallery_stream_token_ttl_minutes:
    default: 15
    client: false

  media_gallery_bind_stream_to_user:
    default: true
    client: false

  media_gallery_bind_stream_to_ip:
    default: false
    client: false

  # Tooling
  media_gallery_ffmpeg_path:
    default: "ffmpeg"
    client: false

  media_gallery_ffprobe_path:
    default: "ffprobe"
    client: false
